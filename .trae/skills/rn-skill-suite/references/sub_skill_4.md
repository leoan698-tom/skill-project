=== RN 子技能 4 ===
标题：Skill 4 - 风格一致性校准  
版本：v1.0.0  
更新日期：2026-01-21  
导航：返回主文档 → [main_skill.md](./main_skill.md)

---
name: RN Skill 4 - 风格一致性校准
description: 本技能用于在生成结果偏离设计系统时执行强校准，强制纠正所有不合规的样式与数值。
---

# 目的
当生成代码出现风格偏差时，快速、全面地拉回到设计系统标准。

# 何时使用
- 自检发现任何尺寸、颜色、圆角、阴影、字体等与设计系统不一致时。
- 发现未复用既有组件或禁用态不合规时。

# 输入
- 具体偏差项列表与修正原则。

# 步骤
1. 注入风格校准模板并列出必须修正问题。
2. 要求完整重新生成组件/页面并自检遗漏点。
3. 确认所有魔法数字均来自设计令牌。

# 提示词模板
```text
⚠️ 风格校准警告 ⚠️

刚才生成的代码存在以下风格偏差,需要**立即修正**:

【必须修正的问题】
□ 按钮高度不是 48(发现: 50 / 56)
   → 修正为: 48

□ 圆角值不在系统内(发现: 10 / 15)
   → 必须使用: radius-sm(8) / radius-md(12) / radius-lg(16)

□ 出现硬编码颜色(发现: #3498db / #e74c3c)
   → 必须使用设计令牌: primary / danger

□ 间距不是 4 的倍数(发现: 18 / 22 / 15)
   → 修正为最近的合法值: 16 / 20 / 24

□ 输入框 focus 状态不正确
   → 必须: borderWidth 从 1 → 2, borderColor 变为 border-focus

□ 禁用状态使用了 disabled 属性
   → 修正为: opacity=0.5 + pointerEvents='none'

□ 文字大小/行高不符合字体系统
   → 必须使用: display-*/headline-*/title-*/body-* 中定义的值

【修正原则】
• 100% 对齐已加载的设计系统
• 不允许出现任何"接近"但不精确的值
• 优先复用已有组件,而非重复造轮子
• 所有魔法数字必须来自设计令牌

请**完整重新生成**该组件/页面,严格执行以上修正。
生成后,自检一遍是否还有遗漏的偏差点。
```

# 输出要求
- 重新生成后的完整代码，严格符合设计系统。
- 已修复列表覆盖所有偏差项。

# 校准项扩展
- 条件渲染安全性：
  - 发现 `{variable && <Component />}` 且 variable 可能为 0/""/null/undefined 时，改为 `!!variable && <Component />` 或三元
  - 数字类型使用显式比较（如 `count > 0`），字符串使用长度检查或 `!!text`
- Toast/提示层实现：
  - 禁止使用 Modal 实现 Toast/Snackbar；必须使用绝对定位 + zIndex/elevation
  - 确保不阻塞背景滚动与交互，必要时 `pointerEvents="auto"`
- 模块化规模与职责：
  - 单文件超出 300 行或承担多职责时，强制拆分为子组件/Hook；样式与类型分别抽到 styles.ts 与 types.ts

—— 页脚 ——  
文档：sub_skill_4.md | 返回： [main_skill.md](./main_skill.md)

